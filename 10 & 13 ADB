--java file--

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.InputStream;
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQDataSource;
import javax.xml.xquery.XQException;
import javax.xml.xquery.XQPreparedExpression;
import javax.xml.xquery.XQResultSequence;
import com.saxonica.xqj.SaxonXQDataSource;
public class XQueryTesters {
public static void main(String[] args){
try {
execute();
}
catch (FileNotFoundException e) {
e.printStackTrace();
}
catch (XQException e) {
e.printStackTrace();
}
}
private static void execute() throws FileNotFoundException, XQException{
InputStream inputStream = new FileInputStream(new File("company.xqy"));
XQDataSource ds = new SaxonXQDataSource();
XQConnection conn = ds.getConnection();
XQPreparedExpression exp = conn.prepareExpression(inputStream);
XQResultSequence result = exp.executeQuery();
while (result.next()) {
System.out.println(result.getItemAsString(null));
}
}



--xml file--

<?xml version="1.0" encoding="UTF-8"?>
<company>
<work category="Sales">
<post lang="en">Sales Manager</post>
<year>2008</year>
<Salary>30000.00</Salary>
</work>
<work category="Manifacture">
<post lang="en">Quality Checker</post>
<year>2008</year>
<Salary>50000.00</Salary>
</work>
<work category="Packing">
<post lang="en">Package manager</post>
<year>2008</year>
<Salary>40000.00</Salary>
</work>
</company>


--xquery file--

let $company := (doc("company.xml")/company/work)
return <results>
{
for $x in $company
where $x/Salary>20000
order by $x/Salary
return $x/post
}
</results>
